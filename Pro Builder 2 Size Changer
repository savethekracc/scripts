-- made by savethekracc on discord

local playing = game:GetService("Players")
local player = playing.LocalPlayer
local playergui = player.PlayerGui
script.Parent = playergui

local a = Instance.new("ScreenGui")
a.Parent = script.Parent

local b = Instance.new("Frame")
b.Parent = a
b.Size = UDim2.new(0.3, 1, 0.3, 1)
b.Position = UDim2.new(0.5, 1, 0.5, 1)
b.BorderSizePixel = 3

local c = Instance.new("TextButton")
c.Parent = b
c.Size = UDim2.new(0.35, 1, 0.35, 1)
c.Position = UDim2.new(0.6, 1, 0.6, 1)
c.Text = "Toggle (OFF)"
c.TextScaled = true
c.BorderSizePixel = 3
c.TextColor3 = Color3.fromRGB(255, 255, 255)
c.BackgroundColor3 = Color3.fromRGB(140, 0, 0)
c.Visible = false

local d = c:Clone()
d.Parent = b
d.Position = UDim2.new(0.05, 1, 0.6, 1)
d.Text = "Update"
d.TextScaled = true
d.BackgroundColor3 = Color3.fromRGB(120, 120, 120)
d.TextColor3 = Color3.fromRGB(255, 255, 255)
d.BorderSizePixel = 3
d.Visible = false

local e = Instance.new("TextBox")
e.Parent = b
e.Size = UDim2.new(0.6, 1, 0.35, 1)
e.Position = UDim2.new(0.2, 1, 0.2, 1)
e.PlaceholderText = "Size (studs)"
e.TextScaled = true
e.BackgroundColor3 = Color3.fromRGB(120, 120, 120)
e.PlaceholderColor3 = Color3.fromRGB(160, 160, 160)
e.TextColor3 = Color3.fromRGB(255, 255, 255)
e.BorderSizePixel = 3
e.Text = ""
e.Visible = false

local f = Instance.new("TextLabel")
f.Parent = b
f.Size = UDim2.new(0.6, 1, 0.1, 1)
f.Position = UDim2.new(0.2, 1, 0.05, 1)
f.Text = "Pro Builder 2 Size Changer"
f.TextScaled = true
f.BackgroundTransparency = 1
f.TextColor3 = Color3.fromRGB(0, 0, 0)
f.BorderSizePixel = 0

local g = Instance.new("TextButton")
g.Parent = b
g.Size = UDim2.new(0.05, 1, 0.05, 1)
g.Position = UDim2.new(0.94, 1, 0, 1)
g.Text = "-"
g.TextScaled = true
g.BorderSizePixel = 3
g.TextColor3 = Color3.fromRGB(255, 255, 255)
g.BackgroundColor3 = Color3.fromRGB(120, 120, 120)
g.Name = "close"

local h = c:Clone()
h.Parent = b
h.Position = UDim2.new(0.05, 1, 0.6, 1)
h.Size = UDim2.new(0.9, 1, 0.2, 1)
h.Text = "Enter"
h.TextScaled = true
h.BackgroundColor3 = Color3.fromRGB(120, 120, 120)
h.TextColor3 = Color3.fromRGB(255, 255, 255)
h.BorderSizePixel = 3
h.Visible = true

local i = Instance.new("TextLabel")
i.Parent = b
i.Size = UDim2.new(0.6, 1, 0.1, 1)
i.Position = UDim2.new(0.2, 1, 0.85, 1)
i.Text = "Version 0.3b"
i.TextScaled = true
i.BackgroundTransparency = 1
i.TextColor3 = Color3.fromRGB(0, 0, 0)
i.BorderSizePixel = 0

local j = Instance.new("TextLabel")
j.Parent = b
j.Size = UDim2.new(0.8, 1, 0.4, 1)
j.Position = UDim2.new(0.1, 1, 0.15, 1)
j.Text = "Made by savethekracc on discord"
j.TextScaled = true
j.BackgroundTransparency = 1
j.TextColor3 = Color3.fromRGB(0, 0, 0)
j.BorderSizePixel = 0

local opened = true

local UIS = game:GetService("UserInputService")
local TS = game:GetService("TweenService")

local frame = nil
frame = b
local dragging = false
local dragStart
local startPos

local dragSpeed = 0.25

local function updateInput(input)
	if not opened then
		return
	end
	if not dragging then return end

	local delta = input.Position - dragStart
	local newPos = UDim2.new(
		startPos.X.Scale,
		startPos.X.Offset + delta.X,
		startPos.Y.Scale,
		startPos.Y.Offset + delta.Y
	)

	TS:Create(frame, TweenInfo.new(dragSpeed), {Position = newPos}):Play()
end

frame.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 
		or input.UserInputType == Enum.UserInputType.Touch then

		dragging = true
		dragStart = input.Position
		startPos = frame.Position

		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				dragging = false
			end
		end)
	end
end)

UIS.InputChanged:Connect(function(input)
	if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement 
		or input.UserInputType == Enum.UserInputType.Touch) then
		updateInput(input)
	end
end)

local player = game:GetService("Players").LocalPlayer
local char = player.Character or player.CharacterAdded:Wait()
local hum = char:WaitForChild("Humanoid")

local animEnabled = false
local val = 1

-- 1 stud = 0.00000323 timescale

local anim = Instance.new("Animation")
anim.AnimationId = "rbxassetid://94985254081140"

local track = hum:LoadAnimation(anim)
track.TimePosition = val
track:Play(0, 250, 0)

c.MouseButton1Click:Connect(function()
	animEnabled = not animEnabled

	if animEnabled then
		local studs = tonumber(e.Text)
		if studs == nil then studs = 1 end

		val = studs * 0.00000323
		if val > 1 then val = 1 end
		if val < 0 then val = 0 end

		track:Play(0, 250, 0)
		track.TimePosition = val

		c.Text = "Toggle (ON)"
		c.BackgroundColor3 = Color3.fromRGB(0, 140, 0)
	else
		track:Stop()
		c.Text = "Toggle (OFF)"
		c.BackgroundColor3 = Color3.fromRGB(140, 0, 0)
	end
end)


d.MouseButton1Click:Connect(function()
	task.spawn(function()
		d.BackgroundColor3 = Color3.fromRGB(0, 140, 0)
		task.wait(1)
		if d.BackgroundColor3 == Color3.fromRGB(0, 140, 0) then
			d.BackgroundColor3 = Color3.fromRGB(120, 120, 120)
		end
	end)

	-- Convert studs â†’ timescale
	local studs = tonumber(e.Text)
	if studs == nil then studs = 1 end

	-- 1 stud = 0.00000323 timescale
	local inputVal = studs * 0.00000323

	-- clamp between 0 and 1
	if inputVal < 0 then inputVal = 0 end
	if inputVal > 1 then inputVal = 1 end

	val = inputVal

	-- apply timescale to animation either way
	track.TimePosition = val
end)

g.MouseButton1Click:Connect(function()
	opened = not opened

	if opened == false then
		-- CLOSE
		for _, obj in ipairs(b:GetChildren()) do
			if obj.Name ~= "close" then
				obj.Visible = false
			end
		end

		b.BackgroundTransparency = 1
	else
		-- OPEN
		for _, obj in ipairs(b:GetChildren()) do
			if obj.Name ~= "close" then
				obj.Visible = true
			end
		end

		b.BackgroundTransparency = 0
	end
end)

h.MouseButton1Click:Connect(function()
	h:Destroy()
	i:Destroy()
	j:Destroy()
	for _, obj in ipairs(b:GetChildren()) do
		if obj.Name ~= "close" then
			obj.Visible = true
		end
	end
end)
